verbatimEnvironments:
  algorithmic: 1
  lstlisting: 1
  tikzpicture: 1

lookForAlignDelims:
  align:
    alignDoubleBackSlash: 0
  equation:
    alignDoubleBackSlash: 0
  cases:
    alignDoubleBackSlash: 0
  matrix:
    alignDoubleBackSlash: 0
  pmatrix:
    alignDoubleBackSlash: 0

replacements:
  -
    substitution: |-
      s/(?<=\\begin\{document\})(.*?)(?=\\end\{document\})/
      my $body = $1;

      $body =~ s@。@．@g;
      $body =~ s@、@，@g;
      $body =~ s@分かる|解る@わかる@g;
      $body =~ s@出来る@できる@g;
      $body =~ s@の時@のとき@g;
      $body =~ s@言う@いう@g;
      $body =~ s@言え@いえ@g;
      $body =~ s@呼ぶ@よぶ@g;

# Add space before and after +, -, and $.
      # $body =~ s@ *([\+\-\$]) *()@ $1 @g;
# Delete space for a inline math single expression.
      # $body =~ s@\$ *([+-]) *(\w*) *\$@\$ $1$2 \$@g;
# Delete the space between +, - and , or :.      
      # $body =~ s@([\+\-]) *([,:])@$1$2@g;
# Add space after comma.
      $body =~ s@(,) *@, @g;
# Delete space after tab and \n.
      # $body =~ s@([\t\n]) *@$1@g;
# Double or more space to single space.
      # $body =~ s@ +@ @g;
# ( $ f $ ) -> ($ f $)
      $body =~ s@([({\[]) *\$@$1\$@g;
      $body =~ s@\$ *([)}\]．，])@\$$1@g;

      $body;/sxge;
    lookForThis: 1
    when: before
